function View(f,e){function t(b){a.each(e.keys,function(a,d){for(var f=0;f<d.length;++f)if(b.keyCode==d[f])c[a]()})}function p(b){b.src||a(b).attr("src",a(b).attr("data-src"))}function l(a){a.preventDefault();c.show(this.href);c.open()}var h,m,q,i,a=jQuery,n=[],c=this,r=a("body");h=a('<div class="viewer"><ul></ul><a href="#" class="close" title="Close this viewer">&times;</a></div>').hide();q=h.find("ul");e=a.extend({css:{".viewer *, .viewer":{margin:0,padding:0,border:0},".viewer":{"background-color":"#222",
filter:"progid:DXImageTransform.Microsoft.gradient(startColorstr=#D8000000,endColorstr=#D8000000)","background-color":"rgba(0,0,0,0.85)",position:"fixed",right:0,top:0,left:0,bottom:0,display:"block",overflow:"hidden","z-index":Math.ceil((new Date).getTime()/1E7),height:"100%",width:"100%"},".viewer li.current + .loading":{"background-position":"0 center"},".viewer ul":{display:"block",height:"100%",width:"100%","white-space":"nowrap"},".viewer li":{height:"100%",width:"0%",overflow:"hidden",display:"none",
"float":"left","text-align":"center",position:"relative"},".viewer li.previous, .viewer li.next":{cursor:"pointer",display:"block"},".viewer li>div":{left:"10px",right:"10px",bottom:"10px",top:"10px",display:"block","text-align":"center",position:"absolute"},".viewer li.has-caption>div":{bottom:"5em"},".viewer li.loading>div":{background:"url(data:image/gif;base64,R0lGODlhDAAMAPIGAFxcXE5OTlZWVkpKSkZGRkJCQgAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQFHgAGACwAAAAADAAMAAADLmhaIRJFSQHEGFRMQKQhlVFwngIyWqk8lqpgrYs1rvGMXXnapASmPAsm5EHdJAkAIfkEBR4AAQAsBgABAAMABQAAAgaEbwISHAUAIfkEBR4AAQAsBgADAAUAAwAAAgOEj1kAIfkEBR4AAgAsBgAGAAUAAwAAAgYMDmInegUAIfkEBR4AAQAsBgAGAAMABQAAAgOEj1kAIfkEBR4AAgAsAwAGAAMABQAAAgaUchDAzQUAIfkEBR4AAQAsAQAGAAUAAwAAAgOEj1kAIfkEBR4AAgAsAQADAAUAAwAAAgYEImKnGwUAIfkEBR4AAQAsAwABAAMABQAAAgOEj1kAOw%3D%3D) center center no-repeat"},
".viewer li.loading.next>div":{"background-position":"0 center"},".viewer li.loading.previous>div":{"background-position":"right center"},".viewer .close":{color:"#fff","text-decoration":"none","font-weight":"bold","font-size":"20px",position:"absolute",right:"15px",top:"15px",cursor:"pointer",display:"block",opacity:0.6},".viewer .close:hover":{opacity:1},".viewer img":{"max-width":"100%","max-height":"100%",cursor:"pointer",position:"relative",height:"auto",width:"auto","vertical-align":"middle",
"-ms-interpolation-mode":"bicubic"},".viewer .caption":{color:"#aaa","text-shadow":"0 1px 2px rgba(0,0,0,0.8)","line-height":"5em",position:"absolute",bottom:"0",left:"0",right:"0",visibility:"hidden"},".viewer li.current .caption":{visibility:"visible"},".viewer li.previous":{width:"10%"},".viewer li.current":{width:"80%",display:"block"},".viewer li.first.current":{"margin-left":"10%"},".viewer li.last.current":{"margin-right":"10%"},".viewer li.next":{width:"10%"},".viewer li.previous>div":{left:"-50%",
right:"50%"},".viewer li.next>div":{right:"-50%",left:"50%"},".viewer .next img, .viewer .previous img, .viewer .current img":{"-webkit-transform":"translateZ(0)"}},keys:{close:[27],prev:[37,188],next:[39,190]},loadAhead:2,validateUrls:!1},e);this.next=function(){this.show(i.next().find("img"))};this.prev=function(){this.show(i.prev().find("img"))};this.close=function(){h.hide();a(document).unbind("keyup.view");r.css({overflow:r.data("viewer-overflow")})};this.open=function(){h.show();a(document).bind("keyup.view",
t);r.data("viewer-overflow",r.css("overflow")).css({overflow:"hidden"});this.sync()};this.show=function(b){"string"==typeof b&&(b='[src="'+b+'"],[data-src="'+b+'"]',b=$i=m.find(b).add(m.filter(b)).eq(0));if(b.constructor==a&&0<b.length){h.find("li").removeClass("current next previous").removeAttr("title");i=$parent=b.parents("li").addClass("current");i.next().addClass("next").attr("title","Next");i.prev().addClass("previous").attr("title","Previous");this.sync();var b=i,c=e.loadAhead;p(b.find("img"));
b.nextAll().slice(0,c).add(b.prevAll().slice(0,c)).find("img").each(function(a,b){p(b)})}};this.sync=function(){var b=q.find("li.current>div").height(),d=b+"px";q.find("li>div>span").each(function(){a(this).css({"line-height":d})});c._ie7&&(m.css({"max-height":d}),m.each(function(){var c=a(this);c.css({top:(b-c.height())/2+"px"})}))};this.next=function(){c.show(i.next().find("img"))};this.prev=function(){c.show(i.prev().find("img"))};"object"==typeof f&&f.jquery?f.find("a[href]").add(f.filter("a[href]")).each(function(){(/\.(jpeg|jpg|gif|png)(\?|#)?(.*)?$/i.test(this.href)||
!e.validateUrls)&&n.push({src:this.href,caption:this.title});a(this).unbind("click.view").bind("click.view",l)}):a.isArray(f)&&(n=f);if(a.isArray(n))for(var g=0,d;d=n[g];++g){var o=null,j=a('<li class="loading"/>');"object"==typeof d&&d.src?o=d.src:"string"==typeof d&&(o=d);var s=new Image;s.onload=function(){c.sync();a(this).css({visibility:"visible"}).parents("li").removeClass("loading")};a(s).css({visibility:"hidden"});a(s).attr("data-src",o);d.caption&&j.addClass("has-caption").append(a('<span class="caption" />').text(d.caption));
0==g&&j.addClass("first");g==n.length-1&&j.addClass("last");q.append(j.append(a("<div/>").append(a("<span/>").append(s))))}m=h.find("img");a("body").append(h);if(!View._cssified)for(k in g=a("<style />"),a("head").prepend(g),g=document.styleSheets[0],e.css){d="";for(name in e.css[k])d+=name+":"+e.css[k][name]+";";for(var o=k.split(","),j=0,k;k=o[j];++j)g.insertRule?g.insertRule(k+"{"+d+"}",g.cssRules.length):g.addRule(k,d)}View._cssified=!0;h.unbind("click.view").bind("click.view",function(b){b.preventDefault();
$t=a(b.target);$t.is("img")?$t.parents("li").is(".current")?c.next():c.show($t):$t.is("li>div,li")?$t.parents("li").is(".next")||$t.is(".next")?c.next():$t.parents("li").is(".previous")||$t.is(".previous")?c.prev():c.close():c.close()});c.sync();c.close();c.show(m.eq(0));c._ie7=-1<navigator.userAgent.indexOf("MSIE 7");a(window).resize(function(){c.sync()})}View._version="1.01";
(function(){var f=jQuery,e=document.getElementsByTagName("script");(-1<e[e.length-1].src.indexOf("?auto")||1)&&f().ready(function(){var e={};f("a.view[href]").each(function(){var l=this.rel;l?(e[l]||(e[l]=[]),e[l].push(this)):new View(f(this))});for(var p in e)new View(f(e[p]))})})();
